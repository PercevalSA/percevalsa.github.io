<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>HifiBerry OS configuration - cyberstuff and halfworking projects</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://percevalsa.github.iofavicon.png><link rel=canonical href=https://percevalsa.github.io/posts/hifiberryos-configuration/><link rel=stylesheet href=/css/style.min.46f28338320bb2be67d9306169b35cbc1f6c81477c9089ac6b89bc6ff283ffb7.css><link rel=stylesheet href=/assets/css/extended.min.9729f28a5087b689b946e103d96abd63bfd37b1417effa251dbf798312e3fba5.css><meta name=description content="How to build librespot for picore player"><meta property="og:title" content="HifiBerry OS configuration"><meta property="og:type" content="website"><meta property="og:url" content="https://percevalsa.github.io/posts/hifiberryos-configuration/"><meta property="og:image" content="https://www.hifiberry.com/wp-content/uploads/2020/01/filter.jpg"><meta property="og:description" content="How to build librespot for picore player"><meta name=twitter:card content="summary"><meta name=twitter:site content="PercevalSA"><meta name=twitter:creator content="PercevalSA"></head><body class='page frame page-blog-single'><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li class=menu-item-home><a href=https://percevalsa.github.io/>Home</a></li><li class=menu-item-blog><a href=https://percevalsa.github.io/posts/>Blog</a></li></ul></div><div id=wrapper class=wrapper><div class=header><a class=header-logo href=/>cyberstuff and halfworking projects</a><div class=menu-main><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class="menu-item-blog active"><a href=/posts/><span>Blog</span></a></li></ul></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div><div class=blog><div class=intro><h1>HifiBerry OS configuration<span class=dot>.</span></h1><img alt="Article hero image" src=https://www.hifiberry.com/wp-content/uploads/2020/01/filter.jpg></div><div class=content><h1 id=hifiberry-os-customisations>HifiBerry OS Customisations</h1><p>Before moving to my custom version of piCorePlayer with my own Spotify extension I used to run HifiBerry on my raspberryPi.
Here are some modifications I made to improve performances.</p><h3 id=ssh-for-security>SSH for security</h3><p>I always harden all my Linux boxes. <a href=https://www.digitalocean.com/community/tutorials/how-to-harden-openssh-on-ubuntu-20-04>more on how to improve ssh security</a>. Configure your ssh server to <a href=https://www.digitalocean.com/community/tutorials/how-to-harden-openssh-on-ubuntu-20-04#step-4-advanced-hardening>allow key authentication only</a>.</p><p>Add my ssh key to to authorized key for easier remote control</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir .ssh
</span></span><span class=line><span class=cl>vi .ssh/authorized_keys
</span></span></code></pre></div><h3 id=disable-useless-running-processes>disable useless running processes</h3><p>To improve performances on the RaspberryPi I disable all audio services I am not using and all extra processes not useful to me.
I only need <strong>apple airplay</strong> and <strong>spotify</strong> there I only need to keep <code>shairport-sync</code> and <code>spotify</code>.
I disable the following services:</p><ul><li><code>raat</code></li><li><code>mpd</code></li><li><code>squeezelite</code></li><li><code>bluealsa-aplay</code></li><li><code>alsaloop</code></li><li><code>dlnampris</code></li><li><code>mopidy</code></li><li><code>upmpdcli</code></li></ul><p>I disable useless services:</p><ul><li>hifiberry data collector;</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl stop datacollector.service
</span></span><span class=line><span class=cl>systemctl disable datacollector.service
</span></span></code></pre></div><ul><li><a href=https://roon.app/fr/>roon</a> for local music is which I have not.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl stop raat
</span></span><span class=line><span class=cl>systemctl disable raat
</span></span></code></pre></div><p>I&rsquo;m on RaspberryPi 2 so I don&rsquo;t use bluetooth or WiFi</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl stop wpa_supplicant
</span></span><span class=line><span class=cl>systemctl disable wpa_supplicant
</span></span><span class=line><span class=cl>systemctl stop wpa_supplicant@wlan0
</span></span><span class=line><span class=cl>systemctl disable wpa_supplicant@wlan0
</span></span><span class=line><span class=cl>systemctl stop bluealsa
</span></span><span class=line><span class=cl>systemctl disable bluealsa
</span></span><span class=line><span class=cl>systemctl stop mpris-proxy
</span></span><span class=line><span class=cl>systemctl disable mpris-proxy
</span></span></code></pre></div><p>After a reboot and we are good to go</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo reboot
</span></span></code></pre></div></div></div><div class=footer><div class=footer-social><span class="social-icon social-icon-github"><a href=https://github.com/percevalsa title=github target=_blank rel=noopener><img src=/images/social/github.svg width=24 height=24 alt=github></a></span>
<span class="social-icon social-icon-linkedin"><a href=https://www.linkedin.com/in/perceval-arenou/ title=linkedin target=_blank rel=noopener><img src=/images/social/linkedin.svg width=24 height=24 alt=linkedin></a></span></div></div></div><script type=text/javascript src=/js/bundle.min.5993fcb11c07dea925a3fbd58c03c7f1857197c35fccce3aa963a12c0b3c9960.js></script></body></html>